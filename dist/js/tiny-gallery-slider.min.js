"use strict";var g_s={__curtain:document.querySelector(".g-slider__curtain"),_class:"g-slider",all_slides:null,slide_width_modifier:2,current_index:1,scrolling_right:!0,endless_scroll:!0,setScrollDirection:function(e){e>0?g_s.scrolling_right=!0:e<0&&(g_s.scrolling_right=!1)},getNextInSequence:function(e){var s=g_s.current_index+e,t=0;return s>=g_s.all_slides.length&&(s=-1+(t=s-g_s.current_index)),s<0&&(t=0- -s,s=g_s.all_slides.length+t),s},track:{position:0,calc:function(){var e=g_s.all_slides.filter(function(e){return g_s.all_slides.indexOf(e)<g_s.current_index}).map(function(e){return e.width}),s=0;e.length>0&&(s+=e.reduce(function(e,s){return e+s+g_s.slide_width_modifier}));var t=s-(g_s.__container.clientWidth-g_s.all_slides[g_s.current_index].width)/2;g_s.track.position=-t},setTranslation:function(e){g_s.__track.style.transform="translateX("+e+"px)"},scroll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;g_s.slides.setClasses("remove"),g_s.current_index=g_s.getNextInSequence(e),0!==e&&g_s.slides.loadIf(e),g_s.endless_scroll&&(g_s.current_index<=0||g_s.current_index>=g_s.all_slides.length-1)&&g_s.slides.move(e),setTimeout(function(){g_s.__container.classList.add("g-slider--is-animating"),g_s.track.calc(),g_s.track.setTranslation(g_s.track.position),g_s.slides.setClasses("add")},20)}},slides:{resetData:function(){g_s.all_slides=Array.from(document.querySelectorAll(".g-slider__slide")).map(function(e){return{elem:e,width:e.clientWidth}})},switchSrc:function(e){e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src"),e.complete?g_s.slides.resetData():e.addEventListener("load",g_s.slides.resetData)},setClasses:function(e){g_s.all_slides[g_s.getNextInSequence(-1)].elem.classList.toggle("g-slider__slide--is-prev"),g_s.all_slides[g_s.current_index].elem.classList.toggle("g-slider__slide--is-current"),g_s.all_slides[g_s.getNextInSequence(1)].elem.classList.toggle("g-slider__slide--is-next")},move:function(e){if(e>0){var s=g_s.__track.querySelector(".g-slider__slide:first-child"),t=g_s.__track.removeChild(s);g_s.__track.appendChild(t)}else{var r=g_s.__track.querySelector(".g-slider__slide:last-child"),n=g_s.__track.removeChild(r);g_s.__track.insertBefore(n,g_s.__track.querySelector(".g-slider__slide:first-child"))}g_s.slides.resetData(),g_s.current_index=g_s.current_index+-2*e,g_s.track.calc(),g_s.track.setTranslation(g_s.track.position),g_s.current_index=g_s.getNextInSequence(e)},loadIf:function(e){var s=void 0,t=(s=g_s.all_slides[g_s.getNextInSequence(e+e)]).elem.querySelector("img");t.dataset.src&&g_s.slides.switchSrc(t)}},arrows:{enable:function(){g_s.__track.addEventListener("focus",function(){window.addEventListener("keydown",g_s.arrows.handle,!0)}),g_s.__track.addEventListener("blur",function(){window.removeEventListener("keydown",g_s.arrows.handle,!0)}),g_s.__track.focus()},handle:function(e){if(!e.defaultPrevented){switch(e.key){case"ArrowLeft":g_s.track.scroll(-1);break;case"ArrowRight":g_s.track.scroll(1);break;case"Escape":document.activeElement.blur();break;default:return}e.preventDefault()}}},touch:{old_track_position:0,enable:function(){for(var e=["touchstart","touchmove","touchend"],s=[g_s.touch.start,g_s.touch.move,g_s.touch.end],t=0;t<e.length;t++)g_s.__track.addEventListener(e[t],s[t],!0)},start:function(e){g_s.touch.old_track_position=g_s.track.position,g_s.touch.start_x=e.touches[0].pageX},move:function(e){window.requestAnimationFrame(function(){g_s.touch.end_x=e.touches[0].pageX,g_s.touch.dist_x=g_s.touch.start_x-g_s.touch.end_x,g_s.track.position=g_s.touch.old_track_position-g_s.touch.dist_x,g_s.track.setTranslation(g_s.track.position)})},end:function(e){g_s.touch.start_x>g_s.touch.end_x&&g_s.track.scroll(1),g_s.touch.start_x<g_s.touch.end_x&&g_s.track.scroll(-1)}},setup:{run:function(){var e=this;this.slides.resetData(),this.track.calc(),this.track.setTranslation(g_s.track.position),this.__container.classList.add("g-slider--ready"),this.slides.setClasses(),this.arrows.enable(),this.touch.enable(),this.__container.addEventListener("transitionend",function(){e.__container.classList.remove("g-slider--is-animating")});var s=!1;window.addEventListener("resize",function(t){s||window.requestAnimationFrame(function(){e.slides.resetData(),e.track.calc(),e.track.setTranslation(g_s.track.position),s=!1}),s=!0})},markup:function(e){e.classList.add(g_s._class),g_s.__container=e;var s=e.querySelector("*:first-child");s.classList.add(g_s._class+"__track"),s.style.width="9999999px",s.setAttribute("tabindex","0"),g_s.__track=s,e.querySelectorAll("li").forEach(function(e){e.classList.add(g_s._class+"__slide"),e.querySelector("img").setAttribute("draggable","false")}),[{class:["g-slider__button","g-slider__button--left"],onclick:"g_s.track.scroll(-1)",text:"previous"},{class:["g-slider__button","g-slider__button--right"],onclick:"g_s.track.scroll(1)",text:"next"}].forEach(function(s){var t=document.createElement("button");s.class.forEach(function(e){t.classList.add(e)}),t.setAttribute("onclick",s.onclick),t.innerText=s.text,e.appendChild(t)})}},suspendedReveal:{run:function(e){var s=Array.from(e.querySelectorAll("img[src]")).filter(function(e){return!e.loaded}),t=0;g_s.__curtain.classList.add("g-slider__curtain--"+t+"-of-"+s.length),s.forEach(function(e){e.addEventListener("load",function(){t++,g_s.__curtain.classList.add("g-slider__curtain--"+t+"-of-"+s.length),t===s.length&&g_s.setup.run.call(g_s)})})}},init:function(e){var s=e.element,t=void 0===s?null:s;e.suspendedReveal,e.ondemandImages;this.setup.markup.call(g_s,t),g_s.suspendedReveal.run(t)}};
//# sourceMappingURL=tiny-gallery-slider.min.js.map
