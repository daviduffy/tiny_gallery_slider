"use strict";var g_s={__curtain:document.querySelector(".g-slider__curtain"),_class:"g-slider",all_slides:null,slide_width_modifier:2,current_index:1,scrolling_right:!0,endless_scroll:!0,setScrollDirection:function(e){e>0?g_s.scrolling_right=!0:e<0&&(g_s.scrolling_right=!1)},getNextInSequence:function(e){var t=g_s.current_index+e,s=0;return t>=g_s.all_slides.length&&(t=-1+(s=t-g_s.current_index)),t<0&&(s=0- -t,t=g_s.all_slides.length+s),t},track:{position:0,calc:function(){var e=g_s.all_slides.filter(function(e){return g_s.all_slides.indexOf(e)<g_s.current_index}).map(function(e){return e.width}),t=0;e.length>0&&(t+=e.reduce(function(e,t){return e+t+g_s.slide_width_modifier}));var s=t-(g_s.__container.clientWidth-g_s.all_slides[g_s.current_index].width)/2;g_s.track.position=-s},setTranslation:function(e){g_s.__track.style.transform="translateX("+e+"px)"},scroll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;g_s.slides.setClasses("remove"),g_s.current_index=g_s.getNextInSequence(e),0!==e&&g_s.slides.loadIf(e),g_s.endless_scroll&&(g_s.current_index<=0||g_s.current_index>=g_s.all_slides.length-1)&&g_s.slides.move(e),setTimeout(function(){g_s.__container.classList.add("g-slider--is-animating"),g_s.track.calc(),g_s.track.setTranslation(g_s.track.position),g_s.slides.setClasses("add")},20)}},slides:{resetData:function(){g_s.all_slides=Array.from(document.querySelectorAll(".g-slider__slide")).map(function(e){return{elem:e,width:e.clientWidth}})},switchSrc:function(e){e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src"),e.complete?g_s.slides.resetData():e.addEventListener("load",g_s.slides.resetData)},setClasses:function(e){g_s.all_slides[g_s.getNextInSequence(-1)].elem.classList.toggle("g-slider__slide--is-prev"),g_s.all_slides[g_s.current_index].elem.classList.toggle("g-slider__slide--is-current"),g_s.all_slides[g_s.getNextInSequence(1)].elem.classList.toggle("g-slider__slide--is-next")},move:function(e){if(e>0){var t=g_s.__track.querySelector(".g-slider__slide:first-child"),s=g_s.__track.removeChild(t);g_s.__track.appendChild(s)}else{var i=g_s.__track.querySelector(".g-slider__slide:last-child"),r=g_s.__track.removeChild(i);g_s.__track.insertBefore(r,g_s.__track.querySelector(".g-slider__slide:first-child"))}g_s.slides.resetData(),g_s.current_index=g_s.current_index+-2*e,g_s.track.calc(),g_s.track.setTranslation(g_s.track.position),g_s.current_index=g_s.getNextInSequence(e)},loadIf:function(e){var t=void 0,s=(t=g_s.all_slides[g_s.getNextInSequence(e+e)]).elem.querySelector("img");s.dataset.src&&g_s.slides.switchSrc(s)}},arrows:{enable:function(){g_s.__track.addEventListener("focus",function(){window.addEventListener("keydown",g_s.arrows.handle,!0)}),g_s.__track.addEventListener("blur",function(){window.removeEventListener("keydown",g_s.arrows.handle,!0)}),g_s.__track.focus()},handle:function(e){if(!e.defaultPrevented){switch(e.key){case"ArrowLeft":g_s.track.scroll(-1);break;case"ArrowRight":g_s.track.scroll(1);break;case"Escape":document.activeElement.blur();break;default:return}e.preventDefault()}}},touch:{old_track_position:0,enable:function(){for(var e=["touchstart","touchmove","touchend"],t=[g_s.touch.start,g_s.touch.move,g_s.touch.end],s=0;s<e.length;s++)g_s.__track.addEventListener(e[s],t[s],!0)},start:function(e){g_s.touch.old_track_position=g_s.track.position,g_s.touch.start_x=e.touches[0].pageX},move:function(e){window.requestAnimationFrame(function(){g_s.touch.end_x=e.touches[0].pageX,g_s.touch.dist_x=g_s.touch.start_x-g_s.touch.end_x,g_s.track.position=g_s.touch.old_track_position-g_s.touch.dist_x,g_s.track.setTranslation(g_s.track.position)})},end:function(e){g_s.touch.start_x>g_s.touch.end_x&&g_s.track.scroll(1),g_s.touch.start_x<g_s.touch.end_x&&g_s.track.scroll(-1)}},setup:{run:function(){var e=this;this.slides.resetData(),this.track.calc(),this.track.setTranslation(g_s.track.position),this.__curtain.addEventListener("transitionend",function(){e.__curtain.parentNode.removeChild(g_s.__curtain)}),this.__container.classList.add("g-slider--ready"),this.slides.setClasses(),this.arrows.enable(),this.touch.enable(),this.__container.addEventListener("transitionend",function(){e.__container.classList.remove("g-slider--is-animating")});var t=!1;window.addEventListener("resize",function(s){t||window.requestAnimationFrame(function(){e.slides.resetData(),e.track.calc(),e.track.setTranslation(g_s.track.position),t=!1}),t=!0})},markup:function(e){e.element.classList.add(g_s._class),g_s.__container=e.element;var t=e.element.querySelector("*:first-child");t.classList.add(g_s._class+"__track"),t.style.width="9999999px",t.setAttribute("tabindex","0"),g_s.__track=t,e.element.querySelectorAll("li").forEach(function(e){e.classList.add(g_s._class+"__slide"),e.querySelector("img").setAttribute("draggable","false")}),[{class:["g-slider__button","g-slider__button--left"],onclick:"g_s.track.scroll(-1)",text:"previous"},{class:["g-slider__button","g-slider__button--right"],onclick:"g_s.track.scroll(1)",text:"next"}].forEach(function(t){var s=document.createElement("button");t.class.forEach(function(e){s.classList.add(e)}),s.setAttribute("onclick",t.onclick),s.innerText=t.text,e.element.appendChild(s)})}},init:function(e){this.setup.markup.call(g_s,e),this.setup.run.call(g_s)}};
//# sourceMappingURL=tiny-gallery-slider.min.js.map
