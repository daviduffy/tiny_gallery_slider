"use strict";var g_s={__curtain:document.querySelector(".g-slider__curtain"),_class:"g-slider",all_slides:null,slide_width_modifier:2,current_index:1,scrolling_right:!0,endless_scroll:!0,setScrollDirection:function(t){t>0?g_s.scrolling_right=!0:t<0&&(g_s.scrolling_right=!1)},getNextInSequence:function(t){var e=g_s.current_index+t,s=0;return e>=g_s.all_slides.length&&(e=-1+(s=e-g_s.current_index)),e<0&&(s=0- -e,e=g_s.all_slides.length+s),e},track:{position:0,calc:function(){var t=g_s.all_slides.filter(function(t){return g_s.all_slides.indexOf(t)<g_s.current_index}).map(function(t){return t.width}),e=0;t.length>0&&(e+=t.reduce(function(t,e){return t+e+g_s.slide_width_modifier}));var s=e-(g_s.__container.clientWidth-g_s.all_slides[g_s.current_index].width)/2;g_s.track.position=-s},setTranslation:function(t){g_s.__track.style.transform="translateX("+t+"px)"},scroll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;g_s.setScrollDirection(t),g_s.slides.setClasses("remove"),g_s.current_index=g_s.getNextInSequence(t),0!==t&&g_s.slides.loadIf(t),g_s.endless_scroll&&(g_s.current_index<=0||g_s.current_index>=g_s.all_slides.length-1)&&g_s.slides.move(t),setTimeout(function(){g_s.__container.classList.add("g-slider--is-animating"),g_s.track.calc(),g_s.track.setTranslation(g_s.track.position),g_s.slides.setClasses("add")},20)}},slides:{resetData:function(){g_s.all_slides=Array.from(document.querySelectorAll(".g-slider__slide")).map(function(t){return{elem:t,width:t.clientWidth}})},switchSrc:function(t){t.setAttribute("src",t.dataset.src),t.removeAttribute("data-src"),t.complete?g_s.slides.resetData():t.addEventListener("load",g_s.slides.resetData)},setClasses:function(t){g_s.all_slides[g_s.getNextInSequence(-1)].elem.classList.toggle("g-slider__slide--is-prev"),g_s.all_slides[g_s.current_index].elem.classList.toggle("g-slider__slide--is-current"),g_s.all_slides[g_s.getNextInSequence(1)].elem.classList.toggle("g-slider__slide--is-next")},move:function(t){var e=g_s.scrolling_right?".g-slider__slide:first-child":".g-slider__slide:last-child",s=g_s.__track.querySelector(e),i=g_s.__track.removeChild(s);g_s.scrolling_right?g_s.__track.appendChild(i):g_s.__track.insertBefore(i,g_s.__track.querySelector(".g-slider__slide:first-child")),g_s.slides.resetData(),g_s.current_index=g_s.current_index+-2*t,g_s.track.calc(),g_s.track.setTranslation(g_s.track.position),g_s.current_index=g_s.getNextInSequence(t)},loadIf:function(t){var e=void 0,s=t+t,i=(e=g_s.all_slides[g_s.getNextInSequence(s)]).elem.querySelector("img");i.dataset.src&&g_s.slides.switchSrc(i)}},arrows:{enable:function(){g_s.__track.addEventListener("focus",function(){window.addEventListener("keydown",g_s.arrows.handle,!0)}),g_s.__track.addEventListener("blur",function(){window.removeEventListener("keydown",g_s.arrows.handle,!0)}),g_s.__track.focus()},handle:function(t){if(!t.defaultPrevented){switch(t.key){case"ArrowLeft":g_s.track.scroll(-1);break;case"ArrowRight":g_s.track.scroll(1);break;case"Escape":document.activeElement.blur();break;default:return}t.preventDefault()}}},touch:{active:!1,old_track_position:0,enable:function(){for(var t=["touchstart","touchmove","touchend"],e=[g_s.touch.start,g_s.touch.move,g_s.touch.end],s=0;s<t.length;s++)g_s.__track.addEventListener(t[s],e[s],!0)},start:function(t){g_s.touch.old_track_position=g_s.track.position,g_s.touch.start_x=t.touches[0].pageX,g_s.touch.long_touch=!1,setTimeout(function(){g_s.touch.long_touch=!0},250)},move:function(t){g_s.touch.active||window.requestAnimationFrame(function(){g_s.touch.end_x=t.touches[0].pageX,g_s.touch.dist_x=g_s.touch.start_x-g_s.touch.end_x,g_s.track.position=g_s.touch.old_track_position-g_s.touch.dist_x,g_s.track.setTranslation(g_s.track.position),g_s.touch.active=!1}),g_s.touch.active=!0},end:function(t){g_s.touch.start_x>g_s.touch.end_x&&g_s.track.scroll(1),g_s.touch.start_x<g_s.touch.end_x&&g_s.track.scroll(-1)}},setup:{run:function(){var t=this;this.slides.resetData(),this.track.calc(),this.track.setTranslation(g_s.track.position),this.__curtain.addEventListener("transitionend",function(){t.__curtain.parentNode.removeChild(g_s.__curtain)}),this.__container.classList.add("g-slider--ready"),this.slides.setClasses(),this.arrows.enable(),this.touch.enable(),this.__container.addEventListener("transitionend",function(){t.__container.classList.remove("g-slider--is-animating")});var e=!1;window.addEventListener("resize",function(s){e||window.requestAnimationFrame(function(){t.slides.resetData(),t.track.calc(),t.track.setTranslation(g_s.track.position),e=!1}),e=!0})},markup:function(t){t.element.classList.add(g_s._class),g_s.__container=t.element;var e=t.element.querySelector("*:first-child");e.classList.add(g_s._class+"__track"),e.style.width="9999999px",e.setAttribute("tabindex","0"),g_s.__track=e,t.element.querySelectorAll("li").forEach(function(t){t.classList.add(g_s._class+"__slide")}),[{class:["g-slider__button","g-slider__button--left"],onclick:"g_s.track.scroll(-1)",text:"previous"},{class:["g-slider__button","g-slider__button--right"],onclick:"g_s.track.scroll(1)",text:"next"}].forEach(function(e){var s=document.createElement("button");e.class.forEach(function(t){s.classList.add(t)}),s.setAttribute("onclick",e.onclick),s.innerText=e.text,t.element.appendChild(s)})}},init:function(t){this.setup.markup.call(g_s,t),this.setup.run.call(g_s)}};setTimeout(function(){g_s.init({element:document.querySelector(".target-class")})},500);
//# sourceMappingURL=g-slider.min.js.map
